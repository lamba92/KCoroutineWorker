matrix:
  include:
  - os: windows
    language: c
    before_install:
    - choco install jdk11
    - choco install openssl.light
    script: ".\\\\gradlew check"
  - os: linux
    language: java
    jdk: openjdk11
    before_install:
    - chmod +x gradlew
    script: "./gradlew check"
  - os: osx
    language: java
    jdk: openjdk11
    before_install:
    - chmod +x gradlew
    script: "./gradlew check"
  allow_failures:
  - os: windows
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
after_success:
- |
  if ([ "$TRAVIS_BRANCH" == "master" ] || [ ! -z "$TRAVIS_TAG" ]) && [ "$TRAVIS_PULL_REQUEST" == "false" ]; then
    echo "Deploying..." && ./gradlew publish
  fi
env:
  global:
  - SIGNING_SECRETRINGFILE=./secret.gpg
  - secure: bvlaD0PbV7cDVJBpLjq4EaBnHo57cfL0qSTkaiZJ+NKz8T7wUen7u6CZmR28VABTNVoKt++PN9Kbbeb4T32kZLiPxFR85gyNPJqEut3pQRGnxY3VY7K26fjGAa+RZ/fCNlcxCwbR8pwwWSY8+0XfRMVdQfhn2KFu22dFe8mdREdB5RSdukTohiKaQqLGuIFsuw/3GuiHUMm/y2XlApaWWfvGWWjqRjyDCOcbopJzWRkU66uvExjmYn70mQLJ5+mdeUj24lI096YdxjvBhc13txeKTeyJMlugX9uxkXMR5tMpWl/JFH8xKaoG1VQmNmPz9jD12z9Nhyxld2rm5Tx3KAEY1VsOI14sLseUWTngxcZfGuOMMfsrJ68AXdg6mymP3WXV1GUCnMgXKe9nd4qZRtwA1S7J4v20hCP2z5zDMZq1TBmV/DhWkJtQ5Az7g/ziFoCApB7N04RfQFRT7pDE8GK9lh9hrVKbk0FOYUOzNvZ43akFYxdW4Z8uLfqRNtQ84rUDw9FaLJTCwZTu0kxyEqKyKyoIXc8+rNcIuhyIe8/OhHdvV5VisQER/mr56C9V7FewTNbqQWv1HyOsx4dmFm1LR9j00Jz0STUEFXu9frtG7vVm0+zAV3deVLCxz5WMy0qQyIXlvvHHDSJrg1k6MvkAecPf9SdCQnCpY5BRLzM=
  - secure: fj8vQlyB2VijsVz6pGM80DPUlV0uep1TX2qECWb7zrE2Uh0HXbdBhoNn8Dz8+A6TMkZKaH+bZlCGDHBWB8YHffTLJX4M05NvwhSBmxLDsQyvW2PT3NDYzYkEg6E5ezcQJf2RO/6SsgAu+Qtii1yCpYSB97q1sMj0eAO7QkHYSDY2y3S7wLX9f0yAtopx/EQHgopx5FTOVMWX769/G4RI41J2jB0khtN9RbGp1e6kvU4IvcWuA8xFPAqOoE25YNMrGhJT/BYHfrau+NHiahzwzy1heIPup8WdWp3JaNvkHWR79xYIjFuDV0VGNYTJQZgsDqOJAO9SJgiLixwDBqwrES0KHgSPKylGmTK24g5RE5S7v6cllOqQ33Y1bOPKtZTWWykHzTykQ81AHuShfDPM1Q1B4RvSom50uIpjlllBLMUsHs8vcWaG93S9aBSn4lNi1yUD5JBTxxD3/+roDkxwzkB+vSqbQMTp+CiXDECd47svoJeiF3fM7C0Lgs7UumGs1BLELQl22prJmB8x3RyeDailfWtxxdgHFqlRyuLzb8Bjb1XQjD22pKCIuCPijtRT8eQ0gPd8IwpRzA1OX5aYm8HX3FLekqNEmvh0zu6pQ/sqVVLjC11ihsxbfxwoWAmsmyvQJNJqKShzXAkxpLNO+vNB7tghp6gPjWWymMYKzWg=
  - secure: sAPhFBV1F73NIBKa83amhmYJqQxkqmJY7tMWUO2Tf6v5bkYJ1vkzc7Oa6DAg7+MVo5Bkqo5OarVW8ZM/vfF7ww+gqhazBZAnUOFjMEgeMlWFr/DaZoLFghs2ohE87QZDsQ3C39LZfo4LGlQcuX4825+EVSxpCyQcv/DOjzM3zdAvhjRixi6/rWCmePZMwoWrA+8/+oK895u2alegGETXNFNbuT5eIQVtRULpVrfiy2YyeFIVPxNGbJBBIqFnvbgjwyt17X+y2saAaZKPjYenGf8VtMqIXYQQwb0PFqPEXRHhl0c1zm72V858lo3UwyvZGxYEgTpXdgdm6wMnR5Y2DZCIIHVNqIgmCGYgKweAty85gIh8PY08lbxsI+pl1BmWphwh0cVx768107uarQEWNXCSvN5xblVjNzMYPESfnnA8QskUVbEflvS1uSApVBqwWCtgfyal5cmSkcfgxKEzXyuRbT59QzihWMdKiqtcNiqr1hGT2n4o3e7NREfiB0td3+k3cS94dKMLBZLIwz84RmAT5uMp7AvZkjpHcWbGdogGqPEDXreJ3xU9XTvwA5Bcl2yrJhVH/UYi0+CH8ROHfd6mcfHuakm252ITV/B4oksUPBIhTvoiTrUoF+r02uP4F/tNcwth5x+qQak1VI8Uc5fF86t73uPMAfQiQlFV0p4=
  - secure: jFEqiydnox+seTZHVgDwf6wRYdudZh+mzgJpgE6WpC7tjg9UDwIUai44TaRguVJIJ+XgOdmOiTNZcddPr3keXTV30c4PcCryBbycctWdQMtP5WbnQ12tq3pFSXv8DZgd667KxDOS8so14pIw8mNT2eF3AfDn4AU+I9oLS/tmZIn+W0swaHeC1heijJgQcx8kGcMIYMKM3WTXrlEa+Owo7lHxirWc2mpjhWXeoL6Bt7QMADEnoj9cGiiBjx2BJy7vLxRekR9QNYklmz7MBlSQFj+F1HSlhRfT81KbC/ZijjZaiRcJECBICVK/WqtBGAV+Pv8Y4KzMN6GTUW5L8inq4Isp3+CUxDaF36NRnsWr0+uaK6NBgsWuFIS2ryECHeuY0hDaYJ33naRVKmZPIE30IXP1GmwxfDFU204g+E7Ws5IZl7C/Fq9Sa+p0NyP0CtNtouLisDeVgW5POFOi8sM8kvMUMMOFdjLq/cRl+LzY2BZxtmV/g2QS/M77KpBdZR/q4cL+cbGSRa//JTY1Jm8pOzwfcmcTcdCLZ99aUzIS/ACi1b9yWCoP4mFUnxjXWPkmyjwZzKRK+/Y26mOIfgJyiGt52cz/nPU39v4sVwAH7ZIIeg2LYaEU02nY0Zrc2dmGJ0zPxu2gtEa+2QqSCOD7bjuTEf1OxpmSyeA4TDf8LYM=
before_install:
- openssl aes-256-cbc -K $encrypted_4e33f563f3da_key -iv $encrypted_4e33f563f3da_iv
  -in secret.gpg.enc -out ./secret.gpg
  -d
